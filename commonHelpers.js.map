{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.png","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEaSURBVHgBrZZhDoIwDIUL0fjXo3gUb7R5Er0BHsXD7A+bASlhYeC6V4WXGCHr3reNtkAkqG2D9T70mh/HSj4HybyqyPQ9PeuaXlRQ19GFY4c5dDodLSHNK3/fSam29Q+0k7/N1ZAt5hCyh7kIKZl77y/IMBezgEwXTW4ienBxcc65DCQ0PDYCQghGMDASJJpzTG4ue0KABEHmKeBAQEPx3LiIhmKy/M+aitDyGJoPAWsI32vNWTXpVQnXRal2kPQmO7pPx6XpPRCQmsdjSZ8JhIA0FbOllMKsRZqCQoMpXCy0GJRrFc7hVpGLSVqFWaxk52ZnVgPbIaL5HhBovgVSMv+qg7kt9JznZ+VL//pL+5hWFXei+mwRj+UDSHQ9vnHBEYAAAAAASUVORK5CYII=\"","export const createGallery = (photoInfo) => {\n  return `\n  <li class='gallery-item'>\n    <a class='gallery-link' href='${photoInfo.largeImageURL}'>\n      <img\n        class='gallery-image'\n        src='${photoInfo.webformatURL}'\n        alt='${photoInfo.tags}'\n        width=360\n        height=152/>\n    </a>\n    <ul class='photo-info-list'>\n      <li class='photo-info-list-item'><h2>Likes</h2><p>${photoInfo.likes}</p></li>\n      <li class='photo-info-list-item'><h2>Views</h2><p>${photoInfo.views}</p></li>\n      <li class='photo-info-list-item'><h2>Comments</h2><p>${photoInfo.comments}</p></li>\n      <li class='photo-info-list-item'><h2>Downloads</h2><p>${photoInfo.downloads}</p></li>\n    </ul>\n  </li>`\n };","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/';\n\nexport const fetchPhotos = (searchedQuery, page) => { \n    const axiosOptions = {\n        params: {\n            key: '45417636-6e508772373129b2f08d1fd3e',\n            q: searchedQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            per_page: 15,\n            page: page\n        }\n    };\n\n    return axios.get('/api/', axiosOptions);\n}; ","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iconUrl from \"../src/img/bi_x-octagon.png\";\nimport { createGallery } from \"./js/render-functions\";\nimport { fetchPhotos } from \"./js/pixabay-api\";\n\nconst iconError = iconUrl;\n\nconst searchFormEl = document.querySelector('.form');\nconst loadingEl = document.querySelector('.loader')\nconst galleryListEl = document.querySelector('.gallery')\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn')\n\nlet currentPage = 1;\nlet searchedValue = '';\nlet cardHeight = 0;\n\nconst simpleBox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      overlayOpacity: 0.8,\n    });\n\nconst onSearchImg = async event => {\n    try {\n        event.preventDefault();\n\n        searchedValue = searchFormEl.elements.search_img.value.trim();\n\n        currentPage = 1;\n                        \n        if (!searchedValue) {\n            iziToast.warning({\n                title: 'Warning',\n                message: 'Please fill the search field first.',\n                position: 'topRight',\n            }); \n            return;\n        }\n        \n        loadingEl.classList.add('is-visible');\n        \n    const response = await fetchPhotos(searchedValue, currentPage);\n    if (response.data.hits.length === 0) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      iziToast.error({\n        iconUrl: iconError,\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: 'white',\n        position: 'topRight',\n        color: '#ef4040',\n        maxWidth: '350px'\n      });\n\n       galleryListEl.innerHTML = '';\n      \n       return;\n    };\n      const gallaryCardsTemplate = response.data.hits.map(createGallery).join('');\n\n      galleryListEl.innerHTML = gallaryCardsTemplate;\n        \n      const galleryCardEl = galleryListEl.querySelector('li');\n      cardHeight = galleryCardEl.getBoundingClientRect().height;\n      \n        if (response.data.totalHits > 15) {\n            loadMoreBtnEl.classList.remove('is-hidden');\n        }\n        \n    simpleBox.refresh();\n      \n    searchFormEl.reset(); \n          \n    } catch(err) {\n        iziToast.error({\n        iconUrl: iconError,\n        message: err.message,\n        messageColor: 'white',\n        position: 'topRight',\n        color: '#ef4040',\n        maxWidth: '350px'\n      });} finally {\n        loadingEl.classList.remove('is-visible');\n    }\n};\n\nconst onLoadMoreClick = async () => { \n    try {\n        currentPage++;\n\n        loadMoreBtnEl.classList.add('is-hidden'); \n        loadingEl.classList.add('is-visible');\n\n        const response = await fetchPhotos(searchedValue, currentPage);\n        \n        const gallaryCardsTemplate = response.data.hits.map(photoDetals => createGallery(photoDetals)).join('');\n\n        galleryListEl.insertAdjacentHTML('beforeend', gallaryCardsTemplate);\n       \n        simpleBox.refresh();\n\n        scrollBy({\n            top: cardHeight*2,\n            behavior: 'smooth'\n        });\n\n        loadMoreBtnEl.classList.remove('is-hidden'); \n        if (currentPage === Math.ceil(response.data.totalHits/15)) {\n            loadMoreBtnEl.classList.add('is-hidden');\n            iziToast.warning({\n                title: 'Info',\n                message: 'Were sorry, but youve reached the end of search results.',\n                position: 'topRight',\n    }); \n        };\n    } catch(err) {\n        iziToast.error({\n        iconUrl: iconError,\n        message: err.message,\n        messageColor: 'white',\n        position: 'topRight',\n        color: '#ef4040',\n        maxWidth: '350px'\n      });\n    } finally {\n        loadingEl.classList.remove('is-visible');\n}\n};\n\nsearchFormEl.addEventListener('submit', onSearchImg);\nloadMoreBtnEl.addEventListener('click', onLoadMoreClick); "],"names":["iconUrl","createGallery","photoInfo","axios","fetchPhotos","searchedQuery","page","axiosOptions","iconError","searchFormEl","loadingEl","galleryListEl","loadMoreBtnEl","currentPage","searchedValue","cardHeight","simpleBox","SimpleLightbox","onSearchImg","event","iziToast","response","gallaryCardsTemplate","err","onLoadMoreClick","photoDetals"],"mappings":"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"}